"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[546],{3546:function(e,a,r){r.r(a),r.d(a,{prices:function(){return b},ratings:function(){return k}});var n=r(3433),t=r(4165),c=r(5861),l=r(9439),s=r(1413),i=r(2791),o=r(3263),d=r(7689),u=r(4193),h=r(9085),p=r(6907),x=r(9743),g=r(2677),j=r(3360),m=r(1087),v=r(2597),f=r(1564),y=r(184),Z=function(e,a){switch(a.type){case"FETCH_REQUEST":return(0,s.Z)((0,s.Z)({},e),{},{loading:!0});case"FETCH_SUCCESS":return(0,s.Z)((0,s.Z)({},e),{},{loading:!1,products:a.payload.products,page:a.payload.page,pages:a.payload.pages,countProducts:a.payload.countProducts});case"FETCH_FAIL":return(0,s.Z)((0,s.Z)({},e),{},{loading:!1,error:a.payload});default:return e}},b=[{name:"R$ 1 A R$ 50",value:"1-50"},{name:"R$ 51 A R$ 200",value:"51-200"},{name:"R$ 201 A R$ 1000",value:"201-1000"}],k=[{name:"4 estrelas & acima",rating:4},{name:"3 estrelas & acima",rating:3},{name:"2 estrelas & acima",rating:2},{name:"1 estrelas & acima",rating:1}];a.default=function(){var e=(0,d.s0)(),a=(0,d.TH)().search,r=new URLSearchParams(a),s=r.get("category")||"all",w=r.get("query")||"all",N=r.get("price")||"all",C=r.get("rating")||"all",A=r.get("order")||"all",R=r.get("page")||1,E=(0,i.useReducer)(Z,{loading:!1,error:""}),L=(0,l.Z)(E,2),H=L[0],P=H.loading,S=H.error,F=H.products,_=H.pages,T=H.countProducts,$=L[1];(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var a,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("http://localhost:3001/api/products/search?page=".concat(R,"&query=").concat(w,"&category=").concat(s,"&price=").concat(N,"&rating=").concat(C,"&order=").concat(A));case 3:a=e.sent,r=a.data,$({type:"FETCH_SUCCESS",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),$({type:"FETCH_FAIL",payload:(0,u.b)(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[s,S,A,R,w,N,C]);var q=(0,i.useState)([]),U=(0,l.Z)(q,2),G=U[0],I=U[1];(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var a,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("http://localhost:3001/api/products/categories");case 3:a=e.sent,r=a.data,I(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.Am.error((0,u.b)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var D=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.page||R,n=e.category||s,t=e.query||w,c=e.rating||C,l=e.price||N,i=e.order||A;return"".concat(a?"":"/search?","category=").concat(n,"&query=").concat(t,"&price=").concat(l,"&rating=").concat(c,"&order=").concat(i,"&page=").concat(r)};return(0,y.jsxs)("div",{children:[(0,y.jsx)(p.ql,{children:(0,y.jsx)("title",{children:"Procurar produtos"})}),(0,y.jsxs)(x.Z,{children:[(0,y.jsxs)(g.Z,{md:3,children:[(0,y.jsx)("h3",{children:"Departamento"}),(0,y.jsx)("div",{children:(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)(m.Link,{className:"all"===s?"text-bold":"",to:D({category:"all"}),children:"Any"})}),G.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)(m.Link,{className:"category"===e?"text-bold":"",to:D({category:e}),children:e})},e)}))]})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{children:"Pre\xe7o"}),(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)(m.Link,{className:"all"===N?"text-bold":"",to:D({price:"all"}),children:"Any"})}),b.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)(m.Link,{className:e.value===N?"text-bold":"",to:D({price:e.value}),children:e.name})},e.value)}))]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{children:"Avg. Customer Review"}),(0,y.jsxs)("ul",{children:[k.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)(m.Link,{className:"".concat(e.rating)==="".concat(C)?"text-bold":"",to:D({rating:e.rating}),children:(0,y.jsx)(v.iG,{caption:" & up",rating:e.rating})})},e.name)})),(0,y.jsx)("li",{children:(0,y.jsx)(m.Link,{className:"all"===C?"text-bold":"",to:D({rating:"all"}),children:(0,y.jsx)(v.iG,{caption:" & up",rating:0})})})]})]})]}),(0,y.jsx)(g.Z,{md:9,children:P?(0,y.jsx)(v.pH,{}):S?(0,y.jsx)(v._p,{variant:"danger",children:S}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(x.Z,{className:"justify-content-between mb-3",children:[(0,y.jsx)(g.Z,{md:6,children:(0,y.jsxs)("div",{children:[0===T?"Nenhum":T," Resultados","all"!==w&&" : "+w,"all"!==s&&" : "+s,"all"!==N&&" : Pre\xe7o "+N,"all"!==C&&" : Avalia\xe7\xe3o "+C+" & acima","all"!==w||"all"!==s||"all"!==C||"all"!==N?(0,y.jsx)(j.Z,{variant:"light",onClick:function(){return e("/search")},children:(0,y.jsx)("i",{className:"fas fa-times circle"})}):null]})}),(0,y.jsxs)(g.Z,{className:"text-end",children:["Ordenado por"," ",(0,y.jsxs)("select",{value:A,onChange:function(a){e(D({order:a.target.value}))},children:[(0,y.jsx)("option",{value:"newest",children:"Newest Arrivals"}),(0,y.jsx)("option",{value:"lowest",children:"Price: Low to High"}),(0,y.jsx)("option",{value:"highest",children:"Price: High to Low"}),(0,y.jsx)("option",{value:"toprated",children:"Avg. Customer Reviews"})]})]}),0===(null===F||void 0===F?void 0:F.length)&&(0,y.jsx)(v._p,{children:"Nenhum produto encontrado"}),(0,y.jsx)(x.Z,{children:null===F||void 0===F?void 0:F.map((function(e){return(0,y.jsx)(g.Z,{md:6,lg:4,className:"mb-3",children:(0,y.jsx)(v.xs,{product:e})},e._id)}))}),(0,y.jsx)("div",{children:(0,n.Z)(Array(_).keys()).map((function(e){return(0,y.jsx)(f.J,{className:"mx-1",to:{pathname:"/search",search:D({page:e+1},!0)},children:(0,y.jsx)(j.Z,{variant:"light",className:Number(R)===e+1?"text-bold":"",children:e+1})},e+1)}))})]})})})]})]})}}}]);
//# sourceMappingURL=546.ba709fd8.chunk.js.map