{"version":3,"file":"static/js/944.4c3514ac.chunk.js","mappings":"yQAqGA,UAlFwB,WACtB,IAAQA,GAAWC,EAAAA,EAAAA,MAAXD,OACFE,EAAc,IAAIC,gBAAgBH,GAAQI,IAAI,YAC9CC,EAAWH,GAA4B,IAE7C,GAA0BI,EAAAA,EAAAA,UAAS,IAAG,eAA/BC,EAAK,KAAEC,EAAQ,KACtB,GAAgCF,EAAAA,EAAAA,UAAS,IAAG,eAArCG,EAAQ,KAAEC,EAAW,KAE5B,GAAyCC,EAAAA,EAAAA,YAAWC,EAAAA,GAA5CC,EAAK,EAALA,MAAiBC,EAAW,EAArBC,SACPC,EAAaH,EAAbG,SACFC,GAAWC,EAAAA,EAAAA,MAEXC,EAAY,yCAAG,WAAOC,GAAiB,gFAMxB,OALbC,EAAU,CACd,eAAgB,mBAChB,cAAiB,iBAGnBD,EAAEE,iBAAiB,kBAEYC,EAAAA,EAAAA,KAAW,yCACtC,CACEhB,MAAAA,EACAE,SAAAA,GAEF,CAAEY,QAASA,IACX,KAAD,WANOG,EAAI,EAAJA,KAQRV,EAAY,CAAEW,KAAM,cAAeC,QAASF,IAC5CG,aAAaC,QAAQ,WAAYC,KAAKC,UAAUN,IAEhDP,EAASZ,GAAY,KAAK,kDAE1B0B,EAAAA,GAAAA,OAAYC,EAAAA,EAAAA,GAAS,EAAD,KAAO,0DAE9B,gBAvBiB,sCA+BlB,OANAC,EAAAA,EAAAA,YAAU,WACLjB,GACDC,EAASZ,EAEb,GAAE,CAACY,EAAUZ,EAAUW,KAGrB,UAAC,IAAe,YACd,SAAC,KAAM,WACL,2BAAO,aAET,eAAIkB,UAAU,OAAM,SAAC,WAGrB,UAAC,IAAI,CAACC,SAAUhB,EAAa,WAC3B,UAAC,UAAU,CAACe,UAAU,OAAOE,UAAU,QAAO,WAC5C,SAAC,UAAU,UAAC,WACZ,SAAC,YAAY,CACXX,KAAK,QACLY,UAAQ,EACRC,SAAU,SAAClB,GAAC,OAAKZ,EAASY,EAAEmB,OAAOC,MAAM,QAG7C,UAAC,UAAU,CAACN,UAAU,OAAOE,UAAU,WAAU,WAC/C,SAAC,UAAU,UAAC,WACZ,SAAC,YAAY,CACXX,KAAK,WACLY,UAAQ,EACRC,SAAU,SAAClB,GAAC,OAAKV,EAAYU,EAAEmB,OAAOC,MAAM,QAGhD,gBAAKN,UAAU,OAAM,UACnB,SAAC,IAAM,CAACT,KAAK,SAAQ,SAAC,aAExB,iBAAKS,UAAU,OAAM,UAAC,eACP,KACb,SAAC,EAAAO,KAAI,CAACC,GAAE,0BAAqBrC,GAAW,SAAC,2BAOnD,C,sECjGasC,E,QAAYC,GAAAA,IAAU,4C","sources":["screens/SigninScreen/index.tsx","styles/SignIn.ts"],"sourcesContent":["import React, { SyntheticEvent, useContext, useEffect, useState } from 'react'\r\n\r\nimport axios from 'axios';\r\n\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { Helmet } from 'react-helmet-async'\r\n\r\nimport { Form, Button } from 'react-bootstrap'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { \r\n  Container as ContainerScreen\r\n} from '../../styles/SignIn';\r\n\r\nimport { Store } from '../../context/Store';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport { getError } from '../../util/utils';\r\n\r\nconst SignIn:React.FC = () => {\r\n  const { search } = useLocation();\r\n  const redirectUrl = new URLSearchParams(search).get('redirect');\r\n  const redirect = redirectUrl ? redirectUrl : '/';\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const { userInfo } = state;\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e: SyntheticEvent) => {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'bearer secret'\r\n    }\r\n\r\n    e.preventDefault();\r\n    try {\r\n      const { data }: any = await  axios.post('http://localhost:3001/api/users/signin', \r\n        {\r\n          email, \r\n          password\r\n        },\r\n        { headers: headers }\r\n      );\r\n\r\n      ctxDispatch({ type: 'USER_SIGNIN', payload: data });\r\n      localStorage.setItem('userInfo', JSON.stringify(data));\r\n      \r\n      navigate(redirect || '/');\r\n    } catch (err) {\r\n      toast.error(getError(err));\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(userInfo) {\r\n      navigate(redirect);\r\n    }\r\n  },[navigate, redirect, userInfo]);\r\n\r\n  return (\r\n    <ContainerScreen>\r\n      <Helmet>\r\n        <title>Login</title>\r\n      </Helmet>\r\n      <h1 className='my-3'>\r\n        Login\r\n      </h1>\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Group className=\"mb-3\" controlId='email'>\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control \r\n            type=\"email\" \r\n            required \r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId='password'>\r\n          <Form.Label>Senha</Form.Label>\r\n          <Form.Control \r\n            type=\"password\" \r\n            required\r\n            onChange={(e) => setPassword(e.target.value)} \r\n          />\r\n        </Form.Group>\r\n        <div className='mb-3'>\r\n          <Button type='submit'>Login</Button>\r\n        </div>\r\n        <div className='mb-3'>\r\n          New Customer{' '}\r\n          <Link to={`/signup?redirect${redirect}`}>\r\n            Crie sua conta\r\n          </Link>\r\n        </div>\r\n      </Form>\r\n    </ContainerScreen>\r\n  )\r\n}\r\n\r\nexport default SignIn","import styled from \"styled-components\"\r\n\r\nexport const Container = styled.div`\r\n  max-width: 600px;\r\n`;"],"names":["search","useLocation","redirectUrl","URLSearchParams","get","redirect","useState","email","setEmail","password","setPassword","useContext","Store","state","ctxDispatch","dispatch","userInfo","navigate","useNavigate","handleSubmit","e","headers","preventDefault","axios","data","type","payload","localStorage","setItem","JSON","stringify","toast","getError","useEffect","className","onSubmit","controlId","required","onChange","target","value","Link","to","Container","styled"],"sourceRoot":""}